### CH. 24 클로저

<aside>
💡 클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다 - MDN

</aside>

- 렉시컬 스코프
    - **자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 함수를 어디에 정의했는지에 따라 상위 스코프를 결정한다.
    이를 렉시컬 스코프(정적 스코프)라 한다.**
    - **렉시컬 환경의 “외부 렉시컬 환경에 대한 참조”에 저장할 참조값( 상위 스코프에 대한 참조)은 함수 정의가 평가되는 시점에 함수가 정의된 환경(위치)에 의해 결정된다.**
- 함수 객체의 내부 슬롯 [[ Environment ]]
    - **함수 객체는 내부 슬롯 [[ Environment ]] 에 저장한 렉시컬 환경의 참조(상위 스코프)를 자신이 존재하는 한 기억한다.**
- 클로저와 렉시컬 환경
    
    <aside>
    💡 함수의 생명 주기가 종료되어 실행 컨텍스트가 스택에서 제거되도, 함수의 렉시컬 환경까지 소멸하는 것은 아니다. 
    → 다른 변수에 의해 참조되고 있으면, 가비지 컬렉션의 대상이 되지 않는다.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/83160c6e-cea2-47d9-beee-6f1c2ca8d5e1/Untitled.png)
    
    </aside>
    
    - **클로저는 중첩 함수가 상위 스코프의 식별자를 참조하고 있고 중첩 함수가 외부 함수보다 더 오래 유지되는 경우에 한정하는 것이 일반적이다.**
    - 클로저에 의해 참조되는 상위 스코프의 변수를 **자유 변수(free variable)**이라고 부른다. 클로저란, 쉽게 말해 “**자유 변수에 묶여있는 함수**”라고 할 수 있다.
- 클로저의 활용
    - **클로저는 상태를 안전하게 변경하고 유지하기 위해 사용**된다. 
    ( 상태가 의도치 않게 변경되지 않도록 **상태를 안전하게 은닉하고 특정 함수에게만 상태 변경을 허용**하기 위해 사용된다.)
- 캡슐화와 정보 은닉
    - 캡슐화는 객체의 상태를 나타내는 프로퍼티와 프로퍼티를 참조하고 조작할 수 있는 동작인 메서드를 하나로 묶는 것
    - 캡슐화는 객체의 특정 프로퍼티나 메서드를 감출 목적으로 사용하기도 한다.(정보 은닉)
    
    <aside>
    💡 대부분의 객체지향 프로그래밍 언어는 클래스를 정의하고 그 클래스를 구성하는 멤버(프로퍼티와 메서드)에 대해 public, private, protected 같은 접근 제한자를 선언하여 공개 범위를 한정하는데, 
    자바스크립트는 제공하지 않는다. 따라서, **자바스크립트의 모든 프로퍼티와 메서드는 기본적으로 public** 이다.
    
    </aside>